@startuml
|Заказчик|
start
:Отправляет заявку;

|Диспетчер заказов|
:Принимает заказ;
|Стек заказов|
|Диспетчер склада|
if (Есть свободные роботы?) then (да)
:Передать на выполнение;
|Робот|
:Выполнить заявку;
|Диспетчер склада|
:Передать сигнал о
выполнении заказа;
|Диспетчер заказов|
:Удалить выполненную заявку;
stop
else (нет)
|Диспетчер заказов|
if (Стек заказов заполнен?) then (да)
  :Установить статус "Отменено"
   для старой заявки;
  :Удалить старую заявку;
else (нет)
endif
endif
|Диспетчер заказов|
:Добавить новую заявку;

|Стек заказов|
:Хранение заявок (LIFO);

|Диспетчер склада|
while (Есть заказы в стеке?) is (да)
  while (Есть свободные роботы?) is (нет)
    :Ожидание свободного робота;
  endwhile (да)
    :Передать заявку
на исполнение;
    |Робот|
    :Выполнить заявку;
    |Диспетчер склада|
    :Передать сигнал о
выполнении заказа;
    |Диспетчер заказов|
    :Удалить выполненную заявку;
endwhile (нет)
|Диспетчер заказов|
:Ожидание новых заявок;

|Диспетчер заказов|
stop
@enduml
